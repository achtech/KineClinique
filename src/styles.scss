/* You can add global styles to this file, and also import other style files */
@import './material-theme.css';

/* Reset default browser spacing so the app and its top-level shell fill the viewport.
   This removes the default body margin and ensures app-root/.app-shell stretch edge-to-edge. */
html, body, app-root, .app-shell {
  height: 100%;
  width: 100%;
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

/* Position dialogs directly under the header (top-aligned)
   --------------------------------------------------------
   The app's header/toolbar sits at the top. We align the overlay wrapper to the top
   (flex-start) and pin dialog panes so modal dialogs appear just below the header
   instead of centered.

   If your toolbar height is different adjust the --app-dialog-top-offset variable below.
*/
:root {
  --app-dialog-top-offset: 64px; /* adjust to match your toolbar height */
}

/* Responsive dialog offset overrides
   Keep dialogs positioned just under the header on different screen sizes. */
@media (max-width: 900px) {
  :root {
    --app-dialog-top-offset: 56px;
  }
}

@media (max-width: 600px) {
  :root {
    --app-dialog-top-offset: 48px;
  }
}

@media (min-width: 1200px) {
  :root {
    --app-dialog-top-offset: 72px;
  }
}

/* Ensure overlay wrappers align overlays to the top of the page */
.cdk-global-overlay-wrapper,
.cdk-overlay-container {
  display: flex !important;
  justify-content: center !important;
  align-items: flex-start !important; /* align overlays to top */
}

/* Extra guard for inline wrapper styles */
.cdk-global-overlay-wrapper[style*="flex-start"],
.cdk-global-overlay-wrapper[style*="align-items: flex-start"] {
  align-items: flex-start !important;
}

/* Primary approach: pin dialog panes under the header using fixed positioning.
   This overrides inline styles like margin-top/top that runtime code sometimes sets.
   We center horizontally and position at a fixed top offset so dialogs don't get
   vertically centered behind the toolbar. */
body .cdk-overlay-pane.mat-mdc-dialog-panel,
body .cdk-overlay-pane[role="dialog"],
body .cdk-overlay-container .cdk-overlay-pane {
  position: fixed !important;
  top: var(--app-dialog-top-offset) !important;
  left: 50% !important;
  transform: translateX(-50%) !important;
  margin: 0 !important;
  align-self: flex-start !important;
  max-height: calc(100vh - (var(--app-dialog-top-offset) + 16px)) !important;
  overflow: auto !important;
  box-sizing: border-box !important;
  z-index: 2000 !important; /* ensure dialogs float above other overlays */
}

/* Extra guard: if any overlay pane carries an inline margin-top or top, override it */
body .cdk-overlay-pane[style*="margin-top"],
body .cdk-overlay-pane[style*="top:"] {
  margin-top: 0 !important;
  top: var(--app-dialog-top-offset) !important;
  align-self: flex-start !important;
  position: fixed !important;
  left: 50% !important;
  transform: translateX(-50%) !important;
}

/* Dialog surface and wrapper adjustments to keep content visible and not pushed down */
.cdk-overlay-pane.mat-mdc-dialog-panel,
.mat-mdc-dialog-container,
.cdk-global-overlay-wrapper > .cdk-overlay-pane {
  display: flex !important;
  align-items: flex-start !important;
  justify-content: center !important;
}

/* Keep dialog surfaces from exceeding viewport below the header */
.cdk-overlay-pane.mat-mdc-dialog-panel .mdc-dialog__surface,
.mat-mdc-dialog-container .mdc-dialog__surface {
  max-height: calc(100vh - (var(--app-dialog-top-offset) + 16px)) !important;
  box-sizing: border-box !important;
  overflow: auto !important;
}

/* Dialog/input sizing adjustments â€” make controls comfortable in dialogs */
.cdk-overlay-pane .mat-mdc-input-element,
.cdk-overlay-pane .mat-input-element,
.mat-mdc-dialog-container .mat-mdc-input-element,
.mat-mdc-dialog-container .mat-input-element,
body .cdk-overlay-pane .mat-mdc-input-element,
body .cdk-overlay-pane .mat-input-element {
  height: 48px !important;
  padding: 12px 12px !important;
  font-size: 16px !important;
  line-height: 20px !important;
  box-sizing: border-box !important;
}

/* Make selects in dialogs visually consistent with inputs */
.cdk-overlay-pane .mat-mdc-select-trigger,
.mat-mdc-dialog-container .mat-mdc-select-trigger,
body .cdk-overlay-pane .mat-mdc-select-trigger {
  height: 56px !important;
  display: flex !important;
  align-items: center !important;
  padding: 6px 12px !important;
  box-sizing: border-box !important;
}

/* Ensure overlay backdrop and container don't conflict */
.cdk-overlay-backdrop.cdk-overlay-dark-backdrop {
  /* leave backdrop behavior as-is; z-index is handled on overlay pane */
}

/* Shared filter-panel styles used across list pages (Patients, Appointments, Billing, Staff, etc.)
   Move these here so every page with a .filter-panel/.filter-panel-left/.filter-panel-right
   will get the same appearance and behavior. */

/* Panel container */
.filter-panel {
  background: var(--app-primary) !important;
  color: var(--app-on-primary) !important;
  border-radius: 6px;
  margin-bottom: 24px;
  padding: 12px 20px;
  box-shadow: 0 2px 8px rgba(0,0,0,0.04);
  gap: 16px;
  display: flex;
  align-items: center;
  justify-content: space-between;
  width: 100%;
  box-sizing: border-box;
}

/* Left area grows to take available space */
.filter-panel-left {
  flex: 1 1 0;
  display: flex;
  align-items: center;
  gap: 12px;
  min-width: 0; /* allow inputs to shrink inside flex */
}

/* Keep the action area aligned on the right */
.filter-panel-right {
  display: flex;
  align-items: center;
  justify-content: flex-end;
  margin-left: 12px;
  gap: 12px;
}

/* Make form-fields inside the panel expand sensibly */
.filter-panel .mat-form-field,
.filter-panel .search-field,
.filter-panel-left .mat-form-field {
  width: 100%;
  max-width: 640px;
  min-width: 0;
}

/* Make the input visually fit on a colored background */
.filter-panel .mat-mdc-text-field-wrapper,
.filter-panel .mat-mdc-form-field-infix {
  background: transparent !important;
}

/* Ensure icons, labels and select arrows are readable on the colored background */
.filter-panel .mat-mdc-floating-label,
.filter-panel .mat-mdc-select-arrow,
.filter-panel .mat-mdc-select-value,
.filter-panel .mat-mdc-form-field-infix,
.filter-panel .mat-mdc-input-element,
.filter-panel .mat-input-element,
.filter-panel .mat-icon {
  color: var(--app-on-primary) !important;
  fill: currentColor !important;
}

/* Search / input tweaks for better contrast and touch targets */
.filter-panel .mat-mdc-input-element,
.filter-panel .mat-input-element {
  height: 44px !important;
  padding: 10px 12px !important;
  background: rgba(255,255,255,0.06) !important;
  border-radius: 6px;
  color: var(--app-on-primary) !important;
  box-sizing: border-box !important;
}

/* Make selects in the panel taller and vertically centered */
.filter-panel .mat-mdc-select-trigger,
.filter-panel .mat-mdc-select-value,
.filter-panel .mat-mdc-select-arrow-wrapper {
  height: 44px !important;
  display: flex !important;
  align-items: center !important;
  padding: 6px 8px !important;
  box-sizing: border-box !important;
  color: var(--app-on-primary) !important;
}

/* Ensure the suffix clear button / icons are visible */
.filter-panel .mat-mdc-form-field .mat-icon,
.filter-panel .mat-icon-button .mat-icon {
  color: var(--app-on-primary) !important;
}

/* Small responsive behavior: stack on narrow screens */
@media (max-width: 900px) {
  .filter-panel {
    flex-direction: column;
    align-items: stretch;
    gap: 12px;
    padding: 12px;
  }
  .filter-panel-right {
    justify-content: space-between;
    margin-left: 0;
  }
  .filter-panel-left {
    width: 100%;
  }
}

/* A lightweight fallback style so any page that uses .patients-list-container or similar
   continues to look consistent even if not overridden locally. */
.patients-list-container {
  background: #fff;
  padding: 20px 24px;
  box-shadow: 0 2px 12px rgba(0,0,0,0.10);
  box-sizing: border-box;
}

/* -------------------------
   Additional global tweaks
   ------------------------- */

/* These target button coloring so buttons remain readable even when the side menu is dark.
   If you want to invert button colors when the app uses a dark side menu, add the
   `side-menu-black` class to the <body> element (js can toggle this when menu theme changes).
*/

/* Default: make Mat buttons use the left-side menu background so buttons match the side menu */
.mat-mdc-button,
.mat-mdc-unelevated-button,
.mat-mdc-raised-button,
.mat-mdc-outlined-button,
.mat-mdc-icon-button,
button.mat-mdc-button,
button.mat-mdc-raised-button,
button.mat-mdc-unelevated-button,
button.mat-mdc-outlined-button {
  background-color: var(--app-primary) !important;
  color: var(--app-on-primary) !important;
  border-color: transparent !important;
  box-shadow: none !important;
}

/* Ensure icons inside buttons follow button color */
.mat-mdc-button .mat-icon,
.mat-mdc-unelevated-button .mat-icon,
.mat-mdc-raised-button .mat-icon,
.mat-mdc-outlined-button .mat-icon,
.mat-mdc-icon-button .mat-icon {
  color: inherit !important;
  fill: currentColor !important;
}

/* Hover / focus affordances */
.mat-mdc-button:hover,
.mat-mdc-unelevated-button:hover,
.mat-mdc-raised-button:hover,
.mat-mdc-outlined-button:hover,
.mat-mdc-icon-button:hover {
  filter: brightness(0.92) !important;
}

.mat-mdc-button:focus,
.mat-mdc-unelevated-button:focus,
.mat-mdc-raised-button:focus,
.mat-mdc-outlined-button:focus,
.mat-mdc-icon-button:focus {
  outline: 2px solid rgba(255,255,255,0.12) !important;
}

/* Invert buttons when the body has `side-menu-black` (useful if the side menu is dark) */
body.side-menu-black .mat-mdc-button,
body.side-menu-black .mat-mdc-unelevated-button,
body.side-menu-black .mat-mdc-raised-button,
body.side-menu-black .mat-mdc-outlined-button,
body.side-menu-black .mat-mdc-icon-button,
body.side-menu-black button.mat-mdc-button,
body.side-menu-black button.mat-mdc-raised-button,
body.side-menu-black button.mat-mdc-unelevated-button,
body.side-menu-black button.mat-mdc-outlined-button {
  background-color: #fff !important;
  color: #000 !important;
  border-color: #e0e0e0 !important;
  box-shadow: none !important;
}

body.side-menu-black .mat-mdc-button:hover,
body.side-menu-black .mat-mdc-unelevated-button:hover,
body.side-menu-black .mat-mdc-raised-button:hover,
body.side-menu-black .mat-mdc-outlined-button:hover,
body.side-menu-black .mat-mdc-icon-button:hover {
  filter: brightness(0.96) !important;
}

/* Ensure buttons on the primary-colored filter-panel remain readable */
.filter-panel .mat-mdc-button,
.filter-panel .mat-mdc-raised-button,
.filter-panel .mat-mdc-unelevated-button,
.filter-panel .mat-mdc-icon-button {
  /* match panel background so panel buttons visually blend with the panel */
  background-color: var(--app-primary) !important;
  color: var(--app-on-primary) !important;
}

/* If both body.side-menu-black and panel button, prefer the panel styling */
body.side-menu-black .filter-panel .mat-mdc-button,
body.side-menu-black .filter-panel .mat-mdc-raised-button,
body.side-menu-black .filter-panel .mat-mdc-unelevated-button,
body.side-menu-black .filter-panel .mat-mdc-icon-button {
  background-color: var(--app-primary) !important;
  color: var(--app-on-primary) !important;
}

/* Action icon buttons inside data tables: make them flat and color icons with app-primary */
.mat-mdc-table button[mat-icon-button],
.mdc-data-table button[mat-icon-button],
.mat-mdc-table .mat-mdc-icon-button,
.mdc-data-table__row button[mat-icon-button],
.mat-mdc-table td .mat-mdc-icon-button {
  background: transparent !important;
  box-shadow: none !important;
  color: var(--app-primary) !important;
}

/* Ensure icon elements inside those buttons use the same color */
.mat-mdc-table button[mat-icon-button] .mat-icon,
.mdc-data-table button[mat-icon-button] .mat-icon,
.mat-mdc-table .mat-mdc-icon-button .mat-icon,
.mdc-data-table__row button[mat-icon-button] .mat-icon,
.mat-mdc-table td .mat-mdc-icon-button .mat-icon {
  color: var(--app-primary) !important;
  fill: currentColor !important;
}

/* Keep hover/focus states subtle (no solid background), but preserve focus outline for accessibility */
.mat-mdc-table button[mat-icon-button]:hover,
.mdc-data-table button[mat-icon-button]:hover,
.mat-mdc-table .mat-mdc-icon-button:hover,
.mdc-data-table__row button[mat-icon-button]:hover {
  background: transparent !important;
  filter: none !important;
}

.mat-mdc-table button[mat-icon-button]:focus,
.mdc-data-table button[mat-icon-button]:focus,
.mat-mdc-table .mat-mdc-icon-button:focus,
.mdc-data-table__row button[mat-icon-button]:focus {
  outline: 2px solid rgba(var(--app-primary-rgb, 25,118,210), 0.12) !important;
  outline-offset: 2px !important;
}

/* Paginator navigation icon buttons: make them flat and use the app primary color */
.mat-mdc-paginator .mat-mdc-paginator-icon,
.mat-mdc-paginator .mat-mdc-paginator-navigation-next,
.mat-mdc-paginator .mat-mdc-paginator-navigation-previous,
.mat-mdc-paginator .mat-mdc-paginator-navigation-first,
.mat-mdc-paginator .mat-mdc-paginator-navigation-last,
.mat-mdc-paginator .mat-mdc-paginator-range-actions button[mat-icon-button],
.mat-mdc-paginator .mat-mdc-paginator-range-actions .mat-mdc-icon-button {
  background: transparent !important;
  box-shadow: none !important;
  color: var(--app-primary) !important;
  fill: currentColor !important;
}

/* Ensure SVG icons inside paginator buttons inherit the color */
.mat-mdc-paginator .mat-mdc-paginator-icon svg,
.mat-mdc-paginator button[mat-icon-button] svg,
.mat-mdc-paginator .mat-mdc-paginator-range-actions svg {
  fill: currentColor !important;
  color: inherit !important;
}

/* Disabled paginator icons should be muted but keep no background */
.mat-mdc-paginator button[mat-icon-button][disabled],
.mat-mdc-paginator .mat-mdc-paginator-navigation-previous[disabled],
.mat-mdc-paginator .mat-mdc-paginator-navigation-next[disabled],
.mat-mdc-paginator .mat-mdc-paginator-navigation-first[disabled],
.mat-mdc-paginator .mat-mdc-paginator-navigation-last[disabled] {
  color: rgba(0,0,0,0.38) !important;
  opacity: 0.6 !important;
}

/* Keep hover/focus states subtle (no solid background) while preserving focus outline */
.mat-mdc-paginator button[mat-icon-button]:hover,
.mat-mdc-paginator .mat-mdc-paginator-icon:hover,
.mat-mdc-paginator .mat-mdc-paginator-range-actions button[mat-icon-button]:hover {
  background: transparent !important;
  filter: none !important;
}

.mat-mdc-paginator button[mat-icon-button]:focus,
.mat-mdc-paginator .mat-mdc-paginator-range-actions button[mat-icon-button]:focus {
  outline: 2px solid rgba(var(--app-primary-rgb, 25,118,210), 0.12) !important;
  outline-offset: 2px !important;
}

/* -------------------------
   Global "New" button styling
   ------------------------- */
button.app-new-button,
.filter-panel-right button[mat-raised-button],
.filter-panel-right .mat-mdc-raised-button {
  background: #ffffff !important;
  color: var(--app-primary) !important;
  box-shadow: 0 6px 18px rgba(0,0,0,0.16) !important;
  font-weight: 800 !important;
  font-size: 1.25rem !important;
  padding: 16px 36px !important;
  border-radius: 8px !important;
  min-width: 180px !important;
  line-height: 1 !important;
  text-transform: none !important;
}

/* Hover/active states keep contrast and add a subtle lift */
button.app-new-button:hover,
.filter-panel-right button[mat-raised-button]:hover,
.filter-panel-right .mat-mdc-raised-button:hover {
  background: #ffffff !important;
  transform: translateY(-2px);
  filter: brightness(0.98);
}

/* Make sure icon-only buttons are not affected by the size rules above */
button.mat-icon-button,
button.mat-mdc-icon-button {
  min-width: initial !important;
  padding: initial !important;
}

/* -------------------------
   List header styling
   ------------------------- 
   Make the header/toolbars used at the top of list pages left-aligned and bold.
   Background removed so headers blend with the page and the title appears at the left.
*/
.container .toolbar,
.patients-list-container .toolbar,
.appointments-list-container .toolbar,
.billing-list-container .toolbar,
.prescriptions-list-container .toolbar,
.staff-list-container .toolbar,
.sessions-list-container .toolbar {
  background: transparent !important;
  color: inherit !important;
  border-radius: 0 !important;
  padding: 8px 0 8px 0; /* keep vertical spacing but remove heavy horizontal padding */
  box-shadow: none !important;
  display: flex;
  align-items: center;
  justify-content: flex-start; /* left align content */
  gap: 12px;
}

/* Ensure the title inside those toolbars is readable */
.container .toolbar .page-title,
.patients-list-container .toolbar .page-title,
.appointments-list-container .toolbar .page-title,
.billing-list-container .toolbar .page-title,
.prescriptions-list-container .toolbar .page-title,
.staff-list-container .toolbar .page-title,
.sessions-list-container .toolbar .page-title {
  color: #000 !important;
  font-weight: 700 !important;
}

/* Small screens: make the toolbar spacing comfortable */
@media (max-width: 900px) {
  .container .toolbar,
  .patients-list-container .toolbar,
  .appointments-list-container .toolbar,
  .billing-list-container .toolbar,
  .prescriptions-list-container .toolbar,
  .staff-list-container .toolbar,
  .sessions-list-container .toolbar {
    padding: 10px 12px;
    flex-direction: column;
    align-items: flex-start;
    gap: 8px;
  }
}

/* -------------------------
   Data table header cells: give them the same background as the left side menu
   -------------------------
   Apply the left menu (primary) color to mat header cells and sort headers so table
   headings visually match the side menu. Also ensure text and icons are readable.
*/
.mat-mdc-header-cell,
th.mat-header-cell,
.mat-sort-header-container,
th.mat-sort-header,
.mat-sort-header .mat-sort-header-content,
.mat-sort-header .mat-sort-header-arrow,
.mat-sort-header .mat-sort-header-content {
  background-color: var(--app-primary) !important;
  color: var(--app-on-primary) !important;
  fill: currentColor !important;
  border-bottom: 1px solid rgba(0,0,0,0.06) !important;
  font-weight: 700 !important;
}

/* If the header row uses mat-header-row or custom table header selectors, target them too */
.mat-mdc-header-row,
.mat-mdc-header-row .mat-mdc-header-cell,
thead.mat-mdc-header-row th {
  background-color: var(--app-primary) !important;
  color: var(--app-on-primary) !important;
}

/* Ensure the sort arrow and indicator remain visible on the colored background */
.mat-sort-header-arrow,
.mat-sort-header-stem,
.mat-sort-header-pointer-left,
.mat-sort-header-pointer-right,
.mat-sort-header-pointer-middle {
  color: var(--app-on-primary) !important;
  opacity: 1 !important;
  fill: currentColor !important;
}

/* Keep header content left-aligned while preserving internal sort button layout */
th.mat-header-cell .mat-sort-header-container,
.mat-sort-header-container {
  justify-content: flex-start;
}

/* Make sure sticky header shadow/outline contrasts nicely on the colored background */
.mat-mdc-table .mat-mdc-header-row,
.mat-mdc-header-row {
  box-shadow: none !important;
}

/* -------------------------
   Outer table container border matching left menu
   -------------------------
   Add a border around the whole table (and table container) that uses the app
   primary color so it visually matches the left side menu background.
*/
.mat-mdc-table,
table.mat-mdc-table,
.mdc-data-table__table-container,
.patients-table,
.mat-table,
.table-container,
.md-table-wrapper {
  border: 1px solid var(--app-primary) !important;
  border-radius: 6px;
  overflow: hidden;
  box-shadow: none !important;
  background-clip: padding-box;
}

/* If the table is wrapped by a page-specific container, prefer the outer border there */
.patients-list-container > .mat-mdc-table,
.patients-list-container table,
.patients-list-container .mdc-data-table__table-container {
  border: 1px solid var(--app-primary) !important;
  border-radius: 6px;
  overflow: hidden;
}

/* Keep the table rows' background white so content remains readable */
.mat-mdc-table tbody,
.mdc-data-table__content,
.mat-mdc-table .mat-mdc-row,
.mat-mdc-table .mat-mdc-cell {
  background: #ffffff !important;
  color: inherit !important;
}

/* Make header corners align nicely with the outer border */
.mat-mdc-header-row {
  border-top-left-radius: 6px;
  border-top-right-radius: 6px;
}

/* If the table uses a sticky footer, round the bottom corners too */
.mdc-data-table__footer,
.mat-mdc-footer-row,
.mat-mdc-table tfoot {
  border-bottom-left-radius: 6px;
  border-bottom-right-radius: 6px;
}

/* Ensure any inline table wrapper margins don't break the visible border */
.mdc-data-table__table-container,
.mat-mdc-table {
  margin: 0 !important;
  padding: 0 !important;
  box-sizing: border-box !important;
}

/* Small screens: keep the border but reduce radius slightly */
@media (max-width: 600px) {
  .mat-mdc-table,
  table.mat-mdc-table,
  .mdc-data-table__table-container {
    border-radius: 4px;
  }
}

/* Small screens: if table header stacks, keep background */
@media (max-width: 600px) {
  .mat-mdc-header-cell,
  th.mat-header-cell,
  .mat-sort-header-container,
  .mat-mdc-header-row {
    background-color: var(--app-primary) !important;
    color: var(--app-on-primary) !important;
  }
}

/* End of file */
